#!/bin/bash
# Syscall kernel macro
#grep ' SYSCALL_' *.c | awk '{print $3}' | tr -d ':'

# Syscall names
#grep SYSCALL_ *.c | awk '{print $3}' | tr -d ':' \
| tr '_' '\n' | grep -v SYSCALL | sort | uniq | tr [A-Z] [a-z]

for i in $(grep SYSCALL_ *.c | awk '{print $3}'\
 | tr -d ':' | tr '_' '\n' | grep -v SYSCALL\
 | sort | uniq | tr [A-Z] [a-z] | tr '\n' ' ');  
 do grep -n syscall_$i\( *.c| grep -v 'res ='  \
 | grep -v \; >> ../doc/syscalls.txt ; done

# System call uses
#for i in $(grep SYSCALL_ *.c | awk '{print $3}' \
 #| tr -d ':' | tr '_' '\n' | grep -v SYSCALL | sort \
 #| uniq | tr [A-Z] [a-z] | tr '\n' ' '); 
#do grep -n ' '$i\( *.c| grep -v 'res =' | sort \
 #| grep $i ; done
